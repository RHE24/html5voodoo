<!doctype html>
<html>
<body>
	<style>
body {
	margin: 0;
	padding: 0;
	width: 100%;
	height: 100%;
	background: #ddd;
}

canvas {
	margin: 50px auto 0;
	display: block;
	box-shadow: 0 10px 50px #aaa;
}
</style>

	<script src="app.js"></script>
	<script>
		var block;
		var board;
		var canvas;

		var lastFrame = 0;
		var delta = 0;
		var fps = 10;
		var delay = 1000 / fps;

		function run(time) {
			delta = time - lastFrame;

			if (delta >= delay) {
				board.movePiece();
				canvas.clear();
				board.draw(canvas);
				lastFrame = time;
			}

			requestAnimationFrame(run);
		}

		function main() {
			canvas = new Canvas(42 * 32, 23 * 32);
			canvas.render(document.body);

			block = new Piece(5, 0);
			board = new Board(42, 23);
			board.setPiece(block);

			document.addEventListener("keydown", function(key) {
				KEYS[key.keyCode] = true;
			});

			document.addEventListener("keyup", function(key) {
				KEYS[key.keyCode] = false;
			});

			run();
		}

		main();
	</script>

</body>
</html>

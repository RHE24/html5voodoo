<!doctype html>
<html>
<head>
    <title>Easy Learn Tutorial</title>
    <style>
        body {
            background: #aaa;
        }

        canvas {
            margin: 50px auto 0;
            display: block;
            background: #fff;
            border: 5px solid #333;
        }
    </style>
</head>
<body>

<script>
    var canvas = document.createElement("canvas");
    canvas.width = 900;
    canvas.height = canvas.width * 0.5;

    var ctx = canvas.getContext("2d");
    document.body.appendChild(canvas);

    var scene = {
        entities: [
            {x: 10, y: 10, w: 100, h: 75, color: "#c00", dx: parseInt(Math.random() * 10)},
            {x: 100, y: 100, w: 100, h: 75, color: "#c0c", dx: parseInt(Math.random() * 10)},
        ]
    };

    // Render Loop
    function renderLoop(time) {
        // 1. Render the scene
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (var i = 0, len = scene.entities.length; i < len; i++) {
            var entity = scene.entities[i];
            ctx.fillStyle = entity.color;
            ctx.fillRect(entity.x, entity.y, entity.w, entity.h);

            entity.x = (entity.x + entity.dx) % canvas.width;
        }

        // 2. Call renderLoop again - RAF
        requestAnimationFrame(renderLoop);
    }

    renderLoop(0);
</script>
</body>
</html>
